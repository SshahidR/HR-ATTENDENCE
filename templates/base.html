{% load static %}
<!DOCTYPE html>
<html lang="en" style="height: auto;">

<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <title>AY  Connect | Home</title>
   {% load static %}
   <!-- Google Font: Source Sans Pro -->
   <link rel="stylesheet"
      href="{% static 'ay_connect/fonts_googleapis.css' %}">
   <!-- Font Awesome -->
   <link rel="stylesheet" href="{% static 'plugins/fontawesome-free/css/all.min.css' %}">
   <!-- Ionicons -->
   <link rel="stylesheet" href="{% static 'ay_connect/ionicons.min.css' %}">
   <!-- Tempusdominus Bootstrap 4 -->
   <link rel="stylesheet" href="{% static 'plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css' %}">
   <!-- iCheck -->
   <link rel="stylesheet" href="{% static 'plugins/icheck-bootstrap/icheck-bootstrap.min.css' %}">
   <!-- JQVMap -->
   <link rel="stylesheet" href="{% static 'plugins/jqvmap/jqvmap.min.css' %}">
   <!-- Theme style -->
   <link rel="stylesheet" href="{% static 'css/adminlte.min.css' %}">
   <!-- Custom style -->
   <link rel="stylesheet" href="{% static 'css/custom.css' %}">
   <!-- overlayScrollbars -->
   {% comment %} <link rel="stylesheet" href="{% static 'plugins/overlayScrollbars/css/OverlayScrollbars.min.css' %}"> {% endcomment %}
   <!-- Daterange picker -->
   <link rel="stylesheet" href="{% static 'plugins/daterangepicker/daterangepicker.css' %}">
   <!-- summernote -->
   <link rel="stylesheet" href="{% static 'plugins/summernote/summernote-bs4.min.css' %}">
   <!-- vueformulate Form  -->
   <link rel="stylesheet" href="{% static 'plugins/formulate/snow.min.css' %}">
   

   <link rel="stylesheet" href="{% static 'css/toastr.min.css' %}">
   
   <!-- Jquery UI CSS -->
   <link rel="stylesheet" href="{% static 'plugins/jquery-ui/jquery-ui.min.css' %}">
   
   <!-- Select2 CSS -->
   <link rel="stylesheet" href="{% static 'plugins/select2/css/select2.min.css' %}">
   <link rel="stylesheet" href="{% static 'plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css' %}">
   <!-- DataTables -->
   <link rel="stylesheet" href="{% static 'plugins/datatables-bs4/css/dataTables.bootstrap4.min.css' %}">
   <link rel="stylesheet" href="{% static 'plugins/datatables-responsive/css/responsive.bootstrap4.min.css' %}">
   <link rel="stylesheet" href="{% static 'plugins/datatables-buttons/css/buttons.bootstrap4.min.css' %}">

   


   <link rel="stylesheet" href="{% static 'css/toastr.min.css' %}">


   <script src="{% static 'js/vue.js' %} "></script>
   <script src="{% static 'js/axios.min.js' %}"></script>

   {% block css_files %}
   {% endblock %}
  
   <script>
      var getAllColumnsUrl = '{% url 'core:get_all_columns' "test_modelname" %}'
   </script>
   <style>

      {% comment %} ::-webkit-scrollbar {
            width: 0px;
            height: 0px;
            }

      ::-webkit-scrollbar-thumb {
      border-radius: 0%;
            }

      ::-webkit-scrollbar-track {
      background-color: #f2f2f2;
            } {% endcomment %}

      tfoot.filters {
            display: table-header-group !important;
         }

   </style>
   <body class="sidebar-mini layout-fixed sidebar-collapse" data-panel-auto-height-mode="height" style="height: auto;">
      {% block content_app %} 
      {% endblock %}

      <div class="wrapper" id="app">
         <!-- Navbar -->
         <!-- <headercomp> </headercomp> -->
         
         <!-- Main Sidebar Container -->
         <!-- <sidebarmenucomp></sidebarmenucomp> -->
         

         <div class="content-wrapper "  data-loading-screen="750" style="height: 542.4px; margin-left: 0px !important;">
            {% block content %} 
            {% endblock %}
         </div>

         <!-- <footer class="main-footer d-none">
            <strong>Copyright Â© 2014-2021 <a href="https://adminlte.io/">AdminLTE.io</a>.</strong>
            All rights reserved.
            <div class="float-right d-none d-sm-inline-block">
               <b>Version</b> 3.2.0
            </div>
         </footer>
         
         <div id="sidebar-overlay"></div> -->
         
      </div>
      
      
      
      <!-- jQuery -->
      <script src="{% static 'plugins/jquery/jquery.min.js' %}"></script>

      <!-- jQuery UI 1.11.4 -->
      <script src="{% static 'plugins/jquery-ui/jquery-ui.min.js' %}"></script>
      <!-- jquery-validation -->
      <script src="{% static 'plugins/jquery-validation/jquery.validate.min.js' %}"></script>
      <script src="{% static 'plugins/jquery-validation/additional-methods.min.js' %} "></script>
      <script>
         $.widget.bridge('uibutton', $.ui.button)
      </script>
      <script src="{% static 'plugins/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
      <!-- overlayScrollbars -->
       {% comment %} <script src="{% static 'plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js.download' %}"></script> {% endcomment %}
      <!-- AdminLTE App -->
      <script src="{% static 'js/adminlte.js.download' %}"></script>
      
      <!-- DataTables  & Plugins -->
      <script src="{% static '/plugins/datatables/jquery.dataTables.min.js' %}"></script>
      <script src="{% static 'plugins/datatables-bs4/js/dataTables.bootstrap4.min.js' %}"></script>
      <script src="{% static 'plugins/datatables-responsive/js/dataTables.responsive.min.js' %}"></script>
      <script src="{% static 'plugins/datatables-responsive/js/responsive.bootstrap4.min.js' %}"></script>
      <script src="{% static 'plugins/datatables-buttons/js/dataTables.buttons.min.js' %}"></script>
      <script src="{% static 'plugins/datatables-buttons/js/buttons.bootstrap4.min.js' %}"></script>
      <script src="{% static 'plugins/datatables-buttons/js/buttons.html5.min.js' %}"></script>
      <script src="{% static 'plugins/datatables-buttons/js/buttons.print.min.js' %}"></script>
      <script src="{% static 'plugins/datatables-buttons/js/buttons.colVis.min.js' %}"></script>
      <script src="{% static 'plugins/datatables-colreorder/js/dataTables.colReorder.min.js' %}"></script>
 
      <!-- Form formulate plugin -->
      <script src="{% static 'plugins/formulate/formulate.min.js' %}"></script>
      
      <!-- Select2 JS -->
      <script src="{% static 'plugins/select2/js/select2.full.min.js' %} "></script>
      
      <script src="{% static 'plugins/moment/moment.min.js' %}"></script>
      <script src="{% static 'js/jquery.PrintArea.min.js' %}"></script>
      <script src="{% static 'js/toastr.min.js' %}"></script>
      <script src="{% static 'ay_connect/index.umd.js' %}"></script>

      <script src="{% static 'js/jquery.PrintArea.min.js' %}"></script>
      <script src="{% static 'js/toastr.min.js' %}"></script>
      
      <script src="{% static 'js/moment.min.js' %}"></script>
      <script src="{% static 'js/bootstrap-datetimepicker.min.js' %}"></script>

      <script src="{% static 'js/jquery.PrintArea.min.js' %}"></script>

      <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script> -->
      <script src="{% static 'js/jspdf.min.js' %}"></script>
      <script src="{% static 'js/html2pdf.bundle.min.js' %}"></script> 
      <script src="{% static 'js/html2canvas.min.js' %}" ></script>
      {% include 'reports/pdfReport.html' %}
      
      <!-- <script src="{% static 'ay_connect/polyfills.umd.min.js' %}"></script> -->
      
      {% include 'components/layout/header.html' %}
      
      <script src="{% static 'js/toastr.min.js' %}"></script>

<!-- UNPKG -->
      {% comment %} <script src="{% static 'js/custom_plugins/index.umd.min.js' %}"></script> {% endcomment %}
      <script src="{% static 'js/custom_plugins/jquery.inputmask.min.js' %}"></script>
      <script src="{% static 'js/custom_plugins/jquery.validate.min.js' %}"></script>
      <script src="{% static 'js/custom_plugins/adminlte.min.js' %}"></script>

      <script src="{% static 'js/custom_plugins/loadingoverlay.min.js' %}"></script>

      {% include 'partials/_loading.html' %}
      

      
      {% include 'components/layout/header.html' %}
      
   <link rel="stylesheet" href="{% static 'ay_connect/flatpickr.min.css' %}" />
   <script src="{% static 'ay_connect/flatpickr.min.js' %}" ></script> 
   <script src="{% static 'ay_connect/sweetalert2.js' %}"></script>

      
      <script>

      axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';
      const EventBus = new Vue();

      Vue.use(VueFormulate, {
         classes: {
             wrapper: 'form-group',
             input: 'form-control',
             inputHasErrors: 'is-invalid',
             help: 'form-text text-muted',
         }
     })

     var vAppProperties = {
         delimiters: ['[[', ']]'],
         el: '#app',
         data: {
            defaultProp : {
               header_meta : [],
               tabl_meta_data : [],
               view_meta : [],
            },
            customProp: {
            }
         },
         methods: {
         },
         mounted(){
            var self = this;
         }
   }
 

   const initDataTable=(id, settings)=>{
      if ($.fn.dataTable.isDataTable(id)) {
         var api = $(id).DataTable();
         try {
           api.clear().destroy();
         } catch (error) {
           $(id).html("");
           console.log("UNABLE TO DESTROY");
         }
       }
      //  settings.initComplete = function () {
      //       $(this).find("tfoot").remove();
      //       $(this).find("thead").after("<tfoot/>");
      //       $(this).find("tfoot").append("<tr/>");
      //       $(this).find("tfoot tr").append(settings.columns.map((x, i) =>x.title.trim() == "Action" ? "<th></th>" : "<th>" +'<input class="w-100" type="text" />' +"</th>").join(""));
      //       $(this).find("tfoot").addClass("filters");
      //       var api = this.api();

      //       api
      //       .columns()
      //       .eq(0)
      //       .each(function (colIdx) {
      //          $("input",$(".filters th").eq($(api.column(colIdx).header()).index()))
      //          .off("keyup change")
      //          .on("change", function (e) {
      //          $(this).attr("title", $(this).val());
      //          var regexr = "({search})";
      //          api
      //             .column(colIdx)
      //             .search(
      //                this.value != ""
      //                ? regexr.replace("{search}", "(((" + this.value + ")))")
      //                : "",
      //                this.value != "",
      //                this.value == ""
      //             )
      //             .draw();
      //          })
      //          .on("keyup", function (e) {
      //          e.stopPropagation();
      //          var cursorPosition = this.selectionStart;
      //          $(this).trigger("change");
      //          $(this)
      //             .focus()[0]
      //             .setSelectionRange(cursorPosition, cursorPosition);
      //          });
      //       });
      //    };

      $(id).DataTable(settings);
   }

   </script>
   {% block js_files %}
   
   {% endblock %}

   <script>
      var vApp;
      let pageProperties;
      axios.get(window.location.href)
      .then(response => {
            pageProperties = response.data
            vAppProperties.data.defaultProp.view_meta = pageProperties.view_meta
            vAppProperties.data.defaultProp.header_meta = pageProperties.header_meta;
            
            vAppProperties.data.defaultProp.tabl_meta_data = pageProperties.data_tabl_meta
            vApp = new Vue(vAppProperties);
      })
      .catch(e => {
         console.log(e)
      });
     
   </script>
</body>

</html>